<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SrB Drills</title>
	<link rel="icon" type="imagem/png" href="aperto-de-mao.png" />
    <link href="styles.css" rel="stylesheet">






<script>
//window.onload = function () {
	function simula(){

	var dataPoints = [];
	var y = 0;//1000;
	var nOperacoes = $("#nOperacoes").val(); //500;
	
	var p = $("#p").val(); //0.45;
	var risco = $("#risco").val(); //1.0;
	var rr = $("#rr").val(); //2;

	for ( var i = 0; i < nOperacoes; i++ ) {
		if (Math.random() < p){
			y = y + (rr * risco);
		} else {
			y = y - risco;
		}
		//y += Math.round( 10 + Math.random() * (-10 -10));	
		dataPoints.push({ y: y });
	}

	var options = {
		animationEnabled: false,
		zoomEnabled: true,
		title:{
			text: "Curva de Capital",
			fontFamily: "Calibri",
			fontSize: 40,
		}, 
		subtitles:[{
			text: "As simulações são importantes para se conhecer o operacional, especialmente o drawdown máximo",
			fontFamily: "Calibri",
			fontSize: 20,
		}],
		
	    axisX:{
	    	title: "Trade",
	    	  labelFontSize: 20,
	          labelFontFamily: "Calibri"
	        },
	    axisY:{
	          title: "Ganho %",
	    	  labelFontSize: 20,
	          labelFontFamily: "Calibri"
	        },
		        
		data: [{
			type: "line",
			dataPoints: dataPoints
		}],
		
		backgroundColor: "#F5DEB3",
	};
	var startTime = new Date();
	$("#chartContainer").CanvasJSChart(options);
	var endTime = new Date();
	document.getElementById("timeToRender").innerHTML = "Duração da Renderização: " + (endTime - startTime) + "ms";
	//$("#teste").html("Sandro");
}
</script>
<style>
	#timeToRender {
		position:absolute; 
		top: 10px; 
		font-size: 20px; 
		font-weight: bold; 
		background-color: #d85757;
		padding: 0px 4px;
		color: #ffffff;
	}
	#chartContainer { height: 600px; width: 50%; margin: auto;}
</style>
    
</head>

<body onload=simula()>

	<h2>Página de Teste para Simulações Monte Carlo de Sistema de Trading</h2>
	
	<div id="wrapperTelefones">
		<table id="tabelatelefones">
			<tr>
		  		<td class="tdlabel"><label>Número de Operações:</label></td>
		  		<td><input type="text" id="nOperacoes" name="nOperacoes" value="500"></td> 
		  	</tr>
		  	<tr>
		  		<td class="tdlabel"><label>Probabilidade de Acertar a Operação:</label></td>
		  		<td><input type="text" id="p" name="p" value="0.45"></td> 
		  	</tr>
		  	<tr>
		  		<td class="tdlabel"><label>Razão RR (payoff):</label></td>
		  		<td><input type="text" id="rr" name="rr" value="2"></td> 
		  	</tr>
		  	<tr>
		  		<td class="tdlabel"><label>Risco Percetual por Operação:</label></td>
		  		<td><input type="text" id="risco" name="risco" value="1.0"></td> 
		  	</tr>
		</table>
		<button id="btnSimular" type="button" class="btn btn-primary buttonsalvarnovo" onclick="simula()">Simular</button>
	</div>
		
	
	<div id="chartContainer"></div>
	<!-- <span id="timeToRender"></span>-->
	
	<div id="teste"></div>
	
	<script src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
	<script src="https://canvasjs.com/assets/script/jquery.canvasjs.min.js"></script>

</body>
</html>