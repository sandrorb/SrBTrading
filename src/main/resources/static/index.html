<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SrB Drills</title>
	<link rel="icon" type="imagem/png" href="aperto-de-mao.png" />
    <link href="styles.css" rel="stylesheet">
    
    <script src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
    
    
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<script type="text/javascript">

google.charts.load('current', {packages: ['corechart', 'line']});
google.charts.setOnLoadCallback(drawBasic);

function simula() {
	
      var data = new google.visualization.DataTable();
      data.addColumn('number', 'X');
      data.addColumn('number', 'Curva de Capital');
      
  	var y = 0;//1000;
	var nOperacoes = $("#nOperacoes").val(); //500;
	
	var p = $("#p").val(); //0.45;
	var risco = $("#risco").val(); //1.0;
	var rr = $("#rr").val(); //2;

	for ( var i = 0; i < nOperacoes; i++ ) {
		if (Math.random() < p){
			y = y + (rr * risco);
		} else {
			y = y - risco;
		}
		data.addRow([i,y]);
	}

      var options = {
        hAxis: {
          title: 'Trade',
          titleFontSize: 20,
          titleTextStyle: {color: 'blue'}
        },
        vAxis: {
          title: 'Ganho %',
          titleFontSize: 20,
          titleTextStyle: {color: 'blue'}
        }
      };

      var chart = new google.visualization.LineChart(document.getElementById('chart_simulacao'));

      chart.draw(data, options);
    }

</script>


</head>

<body onload=simula()>

	<h2>Página de Teste para Simulações Monte Carlo de Sistema de Trading</h2>
	<div id="wrapperTelefones">
		<table id="tabelatelefones">
			<tr>
		  		<td class="tdlabel"><label>Número de Operações:</label></td>
		  		<td><input type="text" id="nOperacoes" name="nOperacoes" value="500"></td> 
		  	</tr>
		  	<tr>
		  		<td class="tdlabel"><label>Probabilidade de Acertar a Operação:</label></td>
		  		<td><input type="text" id="p" name="p" value="0.45"></td> 
		  	</tr>
		  	<tr>
		  		<td class="tdlabel"><label>Razão RR (payoff):</label></td>
		  		<td><input type="text" id="rr" name="rr" value="2"></td> 
		  	</tr>
		  	<tr>
		  		<td class="tdlabel"><label>Risco Percetual por Operação:</label></td>
		  		<td><input type="text" id="risco" name="risco" value="1.0"></td> 
		  	</tr>
		</table>
		<button id="btnSimular" type="button" class="btn btn-primary buttonsalvarnovo" onclick="simula()">Simular</button>
	</div>
  
  <div id="chart_simulacao"></div>


</body>
</html>